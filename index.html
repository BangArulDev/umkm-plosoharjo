<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Prototipe E-Commerce UMKM</title>
    <!-- Memuat Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Memuat ikon Heroicons -->
    <script
      type_BROKEN="module"
      src="https://unpkg.com/heroicons@2.1.1/24/outline/index.js"
    ></script>

    <!-- Konfigurasi Tailwind & Font -->
    <script>
      tailwind.config = {
        theme: {
          extend: {
            fontFamily: {
              inter: ["Inter", "sans-serif"],
            },
            colors: {
              primary: {
                50: "#fefce8",
                100: "#fef9c3",
                200: "#fef08a",
                300: "#fde047",
                400: "#facc15",
                500: "#eab308",
                600: "#ca8a04",
                700: "#a16207",
                800: "#854d0e",
                900: "#713f12",
                950: "#422006",
              },
              secondary: {
                50: "#f7fee7",
                100: "#ecfccb",
                200: "#d9f99d",
                300: "#bef264",
                400: "#a3e635",
                500: "#84cc16",
                600: "#65a30d",
                700: "#4d7c0f",
                800: "#3f6212",
                900: "#365314",
                950: "#1a2e05",
              },
            },
          },
        },
      };
    </script>

    <style>
      body {
        font-family: "Inter", sans-serif;
      }
      /* Sembunyikan semua halaman secara default */
      .page {
        display: none;
      }
      /* Tampilkan halaman yang aktif */
      .page.active {
        display: block;
      }
      /* Style untuk input number */
      input[type="number"]::-webkit-inner-spin-button,
      input[type="number"]::-webkit-outer-spin-button {
        -webkit-appearance: none;
        margin: 0;
      }
      input[type="number"] {
        -moz-appearance: textfield;
      }
    </style>
  </head>
  <body class="bg-gray-50">
    <!-- ===== HEADER & NAVIGASI ===== -->
    <header class="bg-white shadow-md fixed w-full top-0 z-50">
      <nav
        class="container mx-auto px-4 py-4 flex justify-between items-center"
      >
        <!-- Logo -->
        <a
          href="#"
          onclick="navigateTo('home')"
          class="text-2xl font-bold text-primary-700"
          >UMKM Lokal</a
        >

        <!-- Fitur Pencarian -->
        <div class="hidden md:block w-1/3">
          <form onsubmit="handleSearch(event)">
            <div class="relative">
              <input
                type="search"
                id="search-input"
                placeholder="Cari produk lokal..."
                class="w-full px-4 py-2 border rounded-full text-sm focus:outline-none focus:ring-2 focus:ring-primary-500"
              />
              <button type="submit" class="absolute right-0 top-0 mt-2.5 mr-4">
                <!-- Ikon Pencarian SVG -->
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke-width="1.5"
                  stroke="currentColor"
                  class="w-5 h-5 text-gray-400"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"
                  />
                </svg>
              </button>
            </div>
          </form>
        </div>

        <!-- Link Kategori & Aksi -->
        <div class="flex items-center space-x-6">
          <div class="hidden md:flex space-x-6 text-gray-700">
            <a
              href="#"
              onclick="showCategory('Makanan')"
              class="hover:text-primary-600"
              >Makanan</a
            >
            <a
              href="#"
              onclick="showCategory('Kerajinan')"
              class="hover:text-primary-600"
              >Kerajinan</a
            >
            <a
              href="#"
              onclick="showCategory('Fashion')"
              class="hover:text-primary-600"
              >Fashion</a
            >
          </div>

          <!-- Ikon Keranjang -->
          <button onclick="navigateTo('cart')" class="relative">
            <!-- Ikon Keranjang SVG -->
            <svg
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              stroke-width="1.5"
              stroke="currentColor"
              class="w-6 h-6 text-gray-700 hover:text-primary-600"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="M15.75 10.5V6a3.75 3.75 0 1 0-7.5 0v4.5m11.356-1.993 1.263 12c.07.665-.45 1.243-1.119 1.243H4.25a1.125 1.125 0 0 1-1.12-1.243l1.264-12A1.125 1.125 0 0 1 5.513 7.5h12.974c.576 0 1.059.435 1.119 1.007Z"
              />
            </svg>
            <span
              id="cart-count-badge"
              class="absolute -top-2 -right-2 bg-red-500 text-white text-xs font-bold rounded-full w-5 h-5 flex items-center justify-center"
              >0</span
            >
          </button>

          <!-- Login/Daftar -->
          <button
            class="bg-primary-600 text-white px-4 py-2 rounded-full text-sm font-medium hover:bg-primary-700"
          >
            Login
          </button>
        </div>
      </nav>
      <!-- Pencarian di Mobile -->
      <div class="md:hidden p-4 bg-white border-t">
        <form onsubmit="handleSearch(event)">
          <input
            type="search"
            id="search-input-mobile"
            placeholder="Cari produk lokal..."
            class="w-full px-4 py-2 border rounded-full text-sm focus:outline-none focus:ring-2 focus:ring-primary-500"
          />
        </form>
      </div>
    </header>

    <!-- ===== KONTEN UTAMA ===== -->
    <!-- Semua halaman akan ditukar 'active' vs 'hidden' oleh JS -->
    <main class="container mx-auto px-4 py-8 mt-32 md:mt-24">
      <!-- ===== A. HALAMAN UTAMA (HOMEPAGE) ===== -->
      <div id="page-home" class="page active">
        <!-- Banner Utama -->
        <div
          class="bg-gradient-to-r from-secondary-500 to-primary-500 rounded-lg p-8 md:p-12 mb-8 text-white text-center"
        >
          <h1 class="text-3xl md:text-5xl font-bold mb-4">
            Dukung Karyakarsa UMKM Lokal
          </h1>
          <p class="text-lg md:text-xl">
            Temukan produk unik dan berkualitas langsung dari pembuatnya.
          </p>
        </div>

        <!-- Judul Bagian -->
        <h2 class="text-2xl font-bold text-gray-800 mb-6">Produk Terbaru</h2>

        <!-- Grid "Card Produk" -->
        <div
          id="home-product-grid"
          class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-6"
        >
          <!-- Card Produk akan di-render oleh JavaScript -->
        </div>
      </div>

      <!-- ===== B. HALAMAN HASIL PENCARIAN / KATEGORI ===== -->
      <div id="page-search" class="page">
        <h1
          id="search-results-title"
          class="text-3xl font-bold text-gray-800 mb-8"
        >
          Hasil Pencarian
        </h1>

        <!-- Opsi Filter Sederhana -->
        <div class="mb-6 flex justify-end">
          <select
            class="border rounded-md px-4 py-2 text-sm focus:outline-none"
          >
            <option>Urutkan: Terbaru</option>
            <option>Urutkan: Harga Terendah</option>
            <option>Urutkan: Harga Tertinggi</option>
          </select>
        </div>

        <!-- Grid "Card Produk" -->
        <div
          id="search-product-grid"
          class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-6"
        >
          <!-- Card Produk akan di-render oleh JavaScript -->
        </div>
        <p
          id="search-no-results"
          class="hidden text-center text-gray-500 text-lg"
        >
          Tidak ada produk yang ditemukan.
        </p>
      </div>

      <!-- ===== C. HALAMAN DETAIL PRODUK ===== -->
      <div id="page-product" class="page">
        <div class="grid md:grid-cols-2 gap-8 md:gap-12">
          <!-- Galeri Foto Produk -->
          <div>
            <img
              id="product-detail-img"
              src="https://placehold.co/600x600/eab308/ffffff?text=Produk"
              alt="Foto Produk"
              class="w-full h-auto object-cover rounded-lg shadow-md aspect-square"
            />
            <!-- Thumbnail (opsional) -->
            <div class="flex space-x-2 mt-4">
              <!--  -->
              <img
                src="https://placehold.co/100x100/eab308/ffffff?text=1"
                alt="thumbnail 1"
                class="w-16 h-16 rounded-md border-2 border-primary-500 cursor-pointer"
              />
              <!--  -->
              <img
                src="https://placehold.co/100x100/f3f4f6/9ca3af?text=2"
                alt="thumbnail 2"
                class="w-16 h-16 rounded-md border cursor-pointer hover:border-primary-400"
              />
            </div>
          </div>

          <!-- Informasi Produk & Aksi -->
          <div class="flex flex-col justify-center">
            <!-- Informasi Penjual (UMKM) -->
            <p class="text-sm text-gray-500 mb-2">
              Dijual oleh:
              <a
                href="#"
                id="product-detail-seller"
                onclick="showCategory('Kerajinan')"
                class="font-medium text-primary-600 hover:underline"
                >Nama Toko UMKM</a
              >
            </p>

            <!-- Nama Produk -->
            <h1
              id="product-detail-name"
              class="text-3xl md:text-4xl font-bold text-gray-800 mb-4"
            >
              Nama Produk Lengkap
            </h1>

            <!-- Harga -->
            <p
              id="product-detail-price"
              class="text-3xl font-bold text-primary-700 mb-6"
            >
              Rp 150.000
            </p>

            <!-- Stok -->
            <p class="text-sm text-gray-600 mb-4">
              Stok tersisa:
              <span
                id="product-detail-stock"
                class="font-medium text-secondary-700"
                >10</span
              >
            </p>

            <!-- Deskripsi Lengkap -->
            <p
              id="product-detail-desc"
              class="text-gray-700 leading-relaxed mb-6"
            >
              Ini adalah deskripsi lengkap produk. Menjelaskan bahan, ukuran,
              dan keunikan dari produk UMKM ini. Dibuat dengan cinta oleh
              pengrajin lokal.
            </p>

            <!-- Tombol Aksi -->
            <div class="flex items-center space-x-4">
              <!-- Pilihan Jumlah (Qty) -->
              <div class="flex items-center border rounded-md">
                <button
                  onclick="updateProductQty('decrement')"
                  class="px-3 py-2 text-gray-600 hover:bg-gray-100 rounded-l-md"
                >
                  -
                </button>
                <input
                  id="product-qty-input"
                  type="number"
                  value="1"
                  min="1"
                  class="w-12 text-center border-none focus:ring-0"
                />
                <button
                  onclick="updateProductQty('increment')"
                  class="px-3 py-2 text-gray-600 hover:bg-gray-100 rounded-r-md"
                >
                  +
                </button>
              </div>

              <!-- Tombol Tambah ke Keranjang -->
              <button
                onclick="handleAddToCart()"
                class="flex-1 bg-primary-600 text-white px-6 py-3 rounded-md font-medium hover:bg-primary-700 transition-colors"
              >
                Tambah ke Keranjang
              </button>
            </div>

            <!-- Notifikasi Sukses -->
            <div
              id="toast-success"
              class="hidden mt-4 bg-secondary-100 border-l-4 border-secondary-500 text-secondary-700 p-4 rounded-md"
            >
              <p>Produk berhasil ditambahkan ke keranjang!</p>
            </div>
          </div>
        </div>
      </div>

      <!-- ===== D. HALAMAN KERANJANG BELANJA (CART) ===== -->
      <div id="page-cart" class="page">
        <h1 class="text-3xl font-bold text-gray-800 mb-8">
          Keranjang Belanja Anda
        </h1>

        <div class="grid md:grid-cols-3 gap-8">
          <!-- Daftar Produk di Keranjang -->
          <div class="md:col-span-2">
            <div id="cart-items-container" class="space-y-6">
              <!-- Item keranjang akan di-render oleh JavaScript -->
            </div>

            <!-- Kondisi Keranjang Kosong -->
            <div id="cart-empty-state" class="hidden text-center py-12">
              <!--  -->
              <svg
                xmlns="http://www.w3.org/2000/svg"
                fill="none"
                viewBox="0 0 24 24"
                stroke-width="1.5"
                stroke="currentColor"
                class="w-16 h-16 text-gray-300 mx-auto mb-4"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  d="M15.75 10.5V6a3.75 3.75 0 1 0-7.5 0v4.5m11.356-1.993 1.263 12c.07.665-.45 1.243-1.119 1.243H4.25a1.125 1.125 0 0 1-1.12-1.243l1.264-12A1.125 1.125 0 0 1 5.513 7.5h12.974c.576 0 1.059.435 1.119 1.007Z"
                />
              </svg>
              <h2 class="text-xl font-medium text-gray-700 mb-2">
                Keranjang Anda kosong
              </h2>
              <p class="text-gray-500 mb-6">
                Ayo mulai belanja produk UMKM lokal!
              </p>
              <button
                onclick="navigateTo('home')"
                class="bg-primary-600 text-white px-6 py-2 rounded-md font-medium hover:bg-primary-700"
              >
                Mulai Belanja
              </button>
            </div>
          </div>

          <!-- Ringkasan Pesanan (Cart) -->
          <div
            id="cart-summary"
            class="bg-white p-6 rounded-lg shadow-md h-fit"
          >
            <h2 class="text-xl font-bold text-gray-800 mb-4 border-b pb-4">
              Ringkasan Pesanan
            </h2>
            <div class="flex justify-between text-gray-700 mb-4">
              <span>Subtotal Barang</span>
              <span id="cart-subtotal" class="font-medium">Rp 0</span>
            </div>
            <p class="text-sm text-gray-500 mb-6">
              Biaya pengiriman akan dihitung saat checkout.
            </p>
            <button
              onclick="navigateTo('checkout')"
              class="w-full bg-secondary-600 text-white px-6 py-3 rounded-md font-medium hover:bg-secondary-700 transition-colors"
            >
              Lanjut ke Checkout
            </button>
          </div>
        </div>
      </div>

      <!-- ===== E. HALAMAN CHECKOUT ===== -->
      <div id="page-checkout" class="page">
        <h1 class="text-3xl font-bold text-gray-800 mb-8">Checkout</h1>

        <form
          id="checkout-form"
          onsubmit="handlePlaceOrder(event)"
          class="grid md:grid-cols-3 gap-8"
        >
          <!-- Kolom Form (Kiri) -->
          <div class="md:col-span-2 space-y-8">
            <!-- 1. Alamat Pelanggan -->
            <div class="bg-white p-6 rounded-lg shadow-md">
              <h2 class="text-xl font-bold text-gray-800 mb-4">
                Alamat Pengiriman
              </h2>
              <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div>
                  <label
                    for="nama"
                    class="block text-sm font-medium text-gray-700"
                    >Nama Lengkap</label
                  >
                  <input
                    type="text"
                    id="nama"
                    required
                    class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2 text-sm focus:ring-primary-500 focus:border-primary-500"
                  />
                </div>
                <div>
                  <label
                    for="hp"
                    class="block text-sm font-medium text-gray-700"
                    >Nomor HP</label
                  >
                  <input
                    type="tel"
                    id="hp"
                    required
                    class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2 text-sm focus:ring-primary-500 focus:border-primary-500"
                  />
                </div>
                <div class="md:col-span-2">
                  <label
                    for="alamat"
                    class="block text-sm font-medium text-gray-700"
                    >Alamat Lengkap</label
                  >
                  <textarea
                    id="alamat"
                    rows="3"
                    required
                    class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2 text-sm focus:ring-primary-500 focus:border-primary-500"
                  ></textarea>
                </div>
                <div>
                  <label
                    for="kodepos"
                    class="block text-sm font-medium text-gray-700"
                    >Kode Pos</label
                  >
                  <input
                    type="text"
                    id="kodepos"
                    required
                    class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2 text-sm focus:ring-primary-500 focus:border-primary-500"
                  />
                </div>
              </div>
            </div>

            <!-- 2. Pilihan Pengiriman (Sederhana) -->
            <div class="bg-white p-6 rounded-lg shadow-md">
              <h2 class="text-xl font-bold text-gray-800 mb-4">
                Pilihan Pengiriman
              </h2>
              <div
                class="border rounded-md p-4 flex justify-between items-center"
              >
                <div>
                  <p class="font-medium">Kurir Lokal (Prototype)</p>
                  <p class="text-sm text-gray-500">Estimasi 2-3 hari kerja</p>
                </div>
                <span class="font-medium text-gray-800">Rp 10.000</span>
              </div>
            </div>

            <!-- 3. Pilihan Pembayaran (Sederhana) -->
            <div class="bg-white p-6 rounded-lg shadow-md">
              <h2 class="text-xl font-bold text-gray-800 mb-4">
                Pilihan Pembayaran
              </h2>
              <div>
                <input
                  type="radio"
                  id="transfer"
                  name="payment"
                  value="transfer"
                  checked
                  class="text-primary-600 focus:ring-primary-500"
                />
                <label for="transfer" class="ml-2 font-medium"
                  >Transfer Bank Manual</label
                >
              </div>
              <div
                id="bank-details"
                class="mt-4 bg-gray-50 p-4 rounded-md border text-sm text-gray-700"
              >
                <p>Silakan transfer ke rekening berikut:</p>
                <p class="font-medium mt-2">
                  Bank BCA: <span class="text-gray-900">123-456-7890</span>
                </p>
                <p class="font-medium">
                  Atas Nama:
                  <span class="text-gray-900">PT UMKM Lokal Jaya</span>
                </p>
              </div>
            </div>
          </div>

          <!-- Kolom Ringkasan (Kanan) -->
          <div class="md:col-span-1">
            <div class="bg-white p-6 rounded-lg shadow-md h-fit">
              <h2 class="text-xl font-bold text-gray-800 mb-4 border-b pb-4">
                Ringkasan Akhir
              </h2>
              <div class="flex justify-between text-gray-700 mb-2">
                <span>Subtotal Barang</span>
                <span id="checkout-subtotal" class="font-medium">Rp 0</span>
              </div>
              <div class="flex justify-between text-gray-700 mb-4">
                <span>Biaya Pengiriman</span>
                <span id="checkout-shipping" class="font-medium"
                  >Rp 10.000</span
                >
              </div>
              <div
                class="border-t pt-4 flex justify-between text-xl font-bold text-gray-900"
              >
                <span>Total</span>
                <span id="checkout-total">Rp 10.000</span>
              </div>
              <button
                type="submit"
                class="mt-6 w-full bg-secondary-600 text-white px-6 py-3 rounded-md font-medium hover:bg-secondary-700 transition-colors"
              >
                Buat Pesanan
              </button>
            </div>
          </div>
        </form>
      </div>

      <!-- ===== F. HALAMAN "PESANAN SELESAI" (THANK YOU) ===== -->
      <div id="page-thankyou" class="page">
        <div
          class="bg-white p-8 md:p-12 rounded-lg shadow-md max-w-2xl mx-auto text-center"
        >
          <!--  -->
          <svg
            xmlns="http://www.w3.org/2000/svg"
            fill="none"
            viewBox="0 0 24 24"
            stroke-width="1.5"
            stroke="currentColor"
            class="w-16 h-16 text-secondary-600 mx-auto mb-4"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              d="M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"
            />
          </svg>
          <h1 class="text-3xl font-bold text-gray-800 mb-4">
            Terima Kasih Atas Pesanan Anda!
          </h1>
          <p class="text-gray-600 mb-6">
            Pesanan Anda telah kami terima dan akan segera diproses.
          </p>

          <div class="bg-gray-50 border rounded-md p-4 mb-6">
            <p class="text-sm text-gray-600">Nomor Pesanan Anda:</p>
            <p id="order-id" class="text-2xl font-medium text-gray-900">
              #12345ABC
            </p>
          </div>

          <h2 class="text-xl font-semibold text-gray-800 mb-3">
            Instruksi Pembayaran
          </h2>
          <div class="text-sm text-gray-600 leading-relaxed">
            <p>
              Silakan lakukan pembayaran sejumlah
              <strong id="thankyou-total" class="text-gray-900"
                >Rp 160.000</strong
              >
              ke rekening:
            </p>
            <p class="font-medium mt-2">
              Bank BCA: 123-456-7890 (a/n PT UMKM Lokal Jaya)
            </p>
            <p class="mt-2">
              Pesanan Anda akan dikirim setelah pembayaran dikonfirmasi.
            </p>
          </div>

          <button
            onclick="navigateTo('home')"
            class="mt-8 bg-primary-600 text-white px-6 py-2 rounded-md font-medium hover:bg-primary-700"
          >
            Kembali ke Beranda
          </button>
        </div>
      </div>
    </main>

    <!-- ===== FOOTER ===== -->
    <footer class="bg-gray-800 text-gray-300 mt-16">
      <div
        class="container mx-auto px-4 py-8 grid grid-cols-1 md:grid-cols-3 gap-8"
      >
        <!-- Tentang Kami -->
        <div>
          <h3 class="text-lg font-semibold text-white mb-4">UMKM Lokal</h3>
          <p class="text-sm">
            Platform komunitas untuk mendukung dan memajukan UMKM di seluruh
            Indonesia. Beli lokal, dukung ekonomi lokal.
          </p>
        </div>
        <!-- Link Cepat -->
        <div>
          <h3 class="text-lg font-semibold text-white mb-4">Bantuan</h3>
          <ul class="space-y-2 text-sm">
            <li><a href="#" class="hover:underline">Cara Berbelanja</a></li>
            <li><a href="#" class="hover:underline">Lacak Pesanan</a></li>
            <li><a href="#" class="hover:underline">FAQ (Tanya Jawab)</a></li>
            <li><a href="#" class="hover:underline">Hubungi Kami</a></li>
          </ul>
        </div>
        <!-- Media Sosial -->
        <div>
          <h3 class="text-lg font-semibold text-white mb-4">Ikuti Kami</h3>
          <p class="text-sm">
            Dapatkan info produk terbaru dan promosi spesial.
          </p>
          <!-- Ikon Medsos (placeholder) -->
        </div>
      </div>
      <div class="bg-gray-900 text-center py-4">
        <p class="text-sm text-gray-500">
          &copy; 2025 UMKM Lokal. Seluruh hak cipta dilindungi.
        </p>
      </div>
    </footer>

    <!-- ===== JAVASCRIPT ===== -->
    <script>
      // --- DATABASE PRODUK (MOCK) ---
      const allProducts = [
        {
          id: 1,
          name: "Kopi Robusta Temanggung",
          price: 75000,
          seller: "Kopi Jaya Temanggung",
          category: "Makanan",
          stock: 15,
          img: "https://plus.unsplash.com/premium_photo-1693266634755-c7cc7aa8de58?ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MXx8cm9idXN0YSUyMGNvZmZlfGVufDB8fDB8fHww&auto=format&fit=crop&q=60&w=600",
          desc: "Biji kopi robusta pilihan dari Temanggung, diproses secara alami. Menghasilkan rasa yang kuat dan aroma yang khas.",
        },
        {
          id: 2,
          name: "Tas Anyam Rotan Asli",
          price: 185000,
          seller: "Pengrajin Rotan Tasik",
          category: "Kerajinan",
          stock: 8,
          img: "https://media.istockphoto.com/id/2177758829/photo/zero-waste-bamboo-woven-products.webp?a=1&b=1&s=612x612&w=0&k=20&c=6Wh5jALikoI2__C9EMvzyChCuKzBSbrleH4vZEa307s=",
          desc: "Tas anyaman rotan premium buatan tangan pengrajin Tasikmalaya. Kuat, stylish, dan ramah lingkungan.",
        },
        {
          id: 3,
          name: "Batik Tulis Madura",
          price: 450000,
          seller: "Batik Warisan Pamekasan",
          category: "Fashion",
          stock: 5,
          img: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQBTwp-HCJrd4onywpkGdrxMJeK67aueIXgAg&s",
          desc: "Kain batik tulis asli Madura dengan motif pesisir yang cerah. Dibuat dengan proses canting tradisional.",
        },
        {
          id: 4,
          name: "Madu Hutan Liar Sumbawa",
          price: 120000,
          seller: "Madu Alami Sumbawa",
          category: "Makanan",
          stock: 20,
          img: "https://images.unsplash.com/photo-1695638696498-706b5082eeb8?ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Nnx8Zm9yZXN0JTIwaG9uZXl8ZW58MHx8MHx8fDA%3D&auto=format&fit=crop&q=60&w=600",
          desc: "Madu hutan liar murni dari nektar multiflora di hutan Sumbawa. Kaya akan nutrisi dan antioksidan.",
        },
        {
          id: 5,
          name: "Keripik Singkong Balado",
          price: 25000,
          seller: "Dapur Ummi Padang",
          category: "Makanan",
          stock: 50,
          img: "data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAkGBxAQEBAQEBAQEBAQFRUVDxYVDxAVFRAVFRUWFxUWFRUYHSggGBolHRUVITEhJSkrLi4uFx8zODMsNygtLisBCgoKDg0OGhAQGy0lHyYtLS0uLzItLS0tLS0tLS0uKy0tLzUtKy0tLS0tLS0tLS0tLy0tLS0tLS0tLS0tLS0tLf/AABEIAL4BCQMBIgACEQEDEQH/xAAbAAABBQEBAAAAAAAAAAAAAAABAAIDBAYFB//EAEQQAAEDAQUFBQQHBgUEAwAAAAEAAhEDBAUSITEGE0FRYSJScYGRMpKh0RQjQmKxwfAVM3KCouFDU5PS8QckNLIWc7P/xAAaAQEAAwEBAQAAAAAAAAAAAAAAAQIDBQQG/8QALREAAgICAgADBgYDAAAAAAAAAAECAwQREiEFMUETMlFxgZEUQmGhsdEiUvD/2gAMAwEAAhEDEQA/ANxhSDVIAjCkDMKGFSQlCAZhSAT4SAQDYShPARhAMDUnBSQmkIBoCKKSAICUIotKATQnwkE4BQBsJwCMIgIAQlCckQgGQkAnwlCAaQmwpCEIQDcKUKSEoQDAEoToTgEBHCUJ8JQgGQjhRhIIBpCEKQhKEBTARCKQUgUIgJBOCAaQgE4ogIBAIQnIIAIFOhCFAGwkQnAIkIBkJBORhAFqkCjapQgDCUIgpIBQkijCAajCJCIQDEgE4hJAKEE9KEBGAnBIhIIBQgQnJFAMhEBGElIEgilCApFBFJAAlDEkUEAcSkDlDKkaVAHyihCIUgQQTgjCAaAnQjCIQDMKSkITSgK1stdOiw1KjoaNObjyaOJXEZtlTLyNy/APtBzS73dOXHinbWZmk3LRx0HEgarhuoQAQNCY46wuXk5k4WOMfQq2b6z1m1Gte0y1wkZEfA6KRcnZv9ycoGN0ZzIy/OfRdVdCqfOCl8Sw4IhNRBVwOKIQCSkCJSSKEqAGUkJRlAJFAFFAJJJBSBJJIFCApSgkgKYRwphcntchIHNUblK8qEqANClaE0BPBQD5RTQlVqtY1z3nC1oJceQGqeQS30h6gtlrFJjnGCR7LZALiSAB6kLi1L1dV+1uafAYgHuHU6+QVOpunOIYC4tGInCeGfHMnJci/wAVjHarW/1OnT4c29zNPZLU17WkuYHnVocOfKZVmFhbXXYC7FA+9OX61yCVhveq0/Ubwgah3sH+UyQfQqlXi/8AvH6ms/Cm+4M1V63zRs0CoTicCWtAJJj4DzXCftNWeRgaymOoLz4E5ALOW2w2mrUfUc7E6oS4zMAcBPTRK5bBVrVDSbWosqiYY91RriQOAwdryP4KJ5tl8uNL/s59uJbV7yNFb7e6s+mXMa1rWwTrJJEyeAkZBUKNfG05EMaSRmDMcQdCFzrQ4Oc4PJfhkRIDRGR5Za9ULFVDXuwy4ZtiTpoPyC8VrlKXKT7PPxJa20VqJNOm8UqTCQwUwBI6uMknnnzXUuzaK0tDC4OrU5w+zJfkT2X8Trz0Wcs9mcXlrQIkhoJ4c3EHPy8+S6Ld8MnVXy32W9kBp4YRGQy4dVd5c4PfI6lPhc5x5S6+B6PZ6wexr2zhe0ObIgwRIkcFHbbW2iwvdJA0AGp4Dp4rHXTfRxA7yJ1BMjLhC6V53sKu6YOyMWKsc4DRIPwJPovevFIyrl6S9CX4ZOFiT7j6mhsVp3jGvw4Q7MCZkcD4FTymU4LQWxhgYY0iMo6JxXUhvitvZzJ65PS0EuSlQULQ2oCWkmHOaZBBDmuLTkeo1TbZaN22QMTiQ1g5uOk8h8kc0lv0Cg3Lj6llJR05gYjLoGIgQCeMDxTlZFR4SlNlFAOQlKU0qQOlAlCUCUA6UpTJRlCCo4IMKcU0hAOcEwqQKMoSBqdCDU8BQBMXHv61NcGNbUJgnGGkQfE85jLqq21FpcxwYx8F7DvWhxzEjDI4TnmI81z7GytUbJYxjRmww6T/AAjiuN4hmvumK+b/AKOthYiWrZP5DHsa8gjI6ZtE/wA3CVLZ6JY0nMjC4HTMu5IGkCS1ziQ72XF5BB0xQEHntupuc5wEQZ9lsSIHPguFJJ+p2o/Aw1utz3V3nFMOOAFxiJOYnTJdOw38GAB4wcssj4OTL12YjE+k8vYToQA5jiCTHfHQc+MLOstTmyxwnDILXcD4Lqezruj12e1OE1pHp92W9lQAYsQ58uORXI2jsxNSlUY4sIcQ4glp0yIMgyOnMrMXY99Eb+k12AfvMjh6wTyWgvG2700i0Oc2MTy1pdhECHZeAXi9hKq1OLPPOpb/AELDKDcAJAeXHMmTIB1LtdeqZbt3SAIAboMtY9oxPHPXqrdmoPezKCBBhwLeyNB0/FcS+btqbylUrPyeS1gaIDBqSJ4RnpJU17lLUmZKmreklv5GhuSysLQ8TLxLABmRBzjyITr+pMoAVcRh5AAyxYiDy8PioDem7f8AVMMsaxrIjM6njn2YzUN4VGVxge59LA6QciQ4AjNuh10BVEo/mLKM3Ll6HIs9GpvnHF9U0iHS0EmJLWzEmStPWpVAA4BxmMRiQDIIHPhrEeSzbLumsxza+JtPMNNJzec5yRJzW0o2prWgnFgHGMLfIn80vfa12aXS1oNkvh1FuYeWgg4ABOeoE+yNUrbftZ5hpFEZZN7T4PGTkPJS2pzHHDgxHUmBDRBgk8fJcmjZmw929DRPUhvHMjQanjGS1jkXqHs4y6Of7Cpvm49nYua01MD8wXzlikySMgTqdCr1G3Nq1KLS0tcN4XNMdh7IEdciSFw7urljix7YJ0zkECcweOqlvG1VGHeMaMTDk7KYLSJI84nqtaMyVa4vtb7X7mVuKrJb1p6NYkufcV5i00Q/7Q7NQcQ4dFfX0kJqcVJepwbK5VycZeaElKCUK5QMpFApKQJBKUCgFKUoFNQgbCRCEoygGqOrXpt9p7G+L2hVdoKFR9mrCi4tqBuJsanCZI8wIXj1t2htWKHim6BGbS2R1jUrOyUkv8V2Xgk32euU76sxdhFUE/wuz8Ms1HadoqbMRa0vDRxlpJ8ImF447aR+hpgcy10n0cFYo7T05l7bQDIyDabgfGXj8F4pzy+Okl9D2Qjjb22zdNtVOrNR3aqOcZPaPY+1lPLCPNdiyVARJJaWZBuYDZGvXVeb2HaqhSdiio4d3A0Z+unRdGnt5Z4g060fyZD1XHsxMlS2otnV/FY7jpSNc4jGThaJOcDT9ZI16LKkSIjiAA4ch/ZZWhtrZssqkfe3c/8AsrzNsrIdS4T96hl6vWMcHJ9Ysfi6U+pHSdR3RDiSW5ATzjTPwWe2zu1rBTtLGh5kNf2TDp0dE6Tl/wAK3btqrO9rWNe0NkF5L6OIxoB2tP7Jtr2gstWmaJq0w12pNWjl/UfXovRTiX1y5cWXWbVtPkjr7E2wGy08TWtwlwybkO0ToOOi6FZzAQ1rhhccU4RnHAjx/ALLXFftlsuJu+pvYTIG9okjIA/a6K1V2rseKQ8YYyGKkc+vbVbcS/bcYvzKTyaHNtS6NMXhwlp1kxEAxyjwWK25tbgKLWOJcXOIEZMEQP8A2PorFTa+yAACo6OP7qPLtrP3jftB5yqOjmWhzon+LqmPjXxl/lBl6smlS3zR1LBSfug0ycDianOZiZ10HFPrkjA/BhH2Zce1prC5TdpbMMeGpUaHwSN0SJAiZB4xOmqkp7YWeQYqDISQztTzE6eAhTLHu5b4s9azqV+Zfc0VKgGyXw15IyBERGYjhPqu3TrYxrinKOEeCw79rLK4AYi0dabpV+x7UWIETXA5y0/mvJbi5D74v7GMsqufbkvuaS8bq+qO4fUY4CXta7svjhH2SekdZVO4XSwj2QdZPHw/JNG1Ngc2PpdJs/fMwqtmv2wtqO/7qhhPEvyHXLVFXfJacH9mVWRWotOSNpZLKx1HGWy4SCNDl2WkenmqlYkQS2MUGDrH6lR3btldzGNa610ZzntniTqPCFQv2/Lvqtdu7ZSBGbRvAMYj2SeAOY5LoSxpuKenv5HkhkQ5tN9Fi5wbPaC9v7mrlUaJ7Lu8By0XY/8AlNgxFhtVFrgYIc4tIPIhwGawhtdic3O0UGnI/v6bZI0Mg69VDXtNje4F9qoOw6P3zBUy0xASHfrTRenFndSuLi2iubVTc1JWLf8AJsrx2kM4aQDRnLnQDrGQOXXiq9gvXDWDnuNSYa2MzLyABnwkrE2u2UzOG10n65neSQRyDT+Kb+1qbQ0BxeQZJY14nLKC4Dms3XlzsjOXx+hZvDrrcYtPo9mcEF59snetorVmNYaoYCC7HUluEe0Iz4Lfkrup7OE1oRQKBKCEDkEJSlSQQSjiTJRCAla9eS/9QLj3FcvaPq6suZ07zfIn0IXqsqhft2NtdB1J0A60z3XDTyOhUSWyUzwKu2FVcV3b5sDqT3Mc0tc0kEciFwnhURdjSUMSBTSVJA8FHEocSOJATBycHKDEliQFnGgXKAFOBQDi5KVGSkHKCSSUsSYSgXKNkpD8SWNRymFyjZdRJw9PD1VxJBygngXN51RxqoTCkY9NhwLLSp6cqtTKu0AmyrjonphXbNSLiAoKTFrNj7lNeqJHYbm89PmdEKmy2IuvdUt64Q5+Tf4eJ8z+C0hKjbAAAEAZAcgNAiStV0ijHSgSmykpICUEkEIIAnAqhJ5o4jzUcidF0pBUsZ5pbw805DRx9s9mxamGpTH1zRmB/iAfmPj6Lxy3WUscQRovfG1nc1kts9md+DXotG8Gb2j7fUdeY4qrLI8ic1ROC6NqsxaSCIVJ7UBXKCeQmOCkAJRBTCkEJJAUcSYCioJHFyTXJNYiaapsukDGiConCEA+FOi6JyonItqJrnKEi2hwT2NTQn03wVDLJBe1NDSpKrwFJZ2YlCb0GPszJXVs9JMs1nhdu67ufVc1rGlxJgABQkYyeyS5rsfWe1jBLnHL5+C9bui7WWakKbczq894/JU9nrnZZWcDUcO278m9PxXWxLaK0Yt7HFAlDEgSr7Kj2pwUYKOJAPSTMSGJSQUMB5hEUzzCZgPNINdzWZccabuiG7d09UsLuaWE80AhTdyHqnBruXxQzRkqCTLbU7IC0zVotDa2pGQbU+TvgV5beFgfSc5r2lrmmCCCCD1C98xFcu+7io2tsVBDwOy8AYh0PMdPwUg8FqU1AQtftHsvWsru02WH2Xj2XefA9CszWowhBSISCkcxNwqQMckCnQhhUFkXKREJOKouBUostow4hTq4ee7fHrCo4/qXTDVyVYlBxPGZV+5LqfaahYwgQJJP6zKltQjuRMU5vjEqJhK0l7bK1qYYaTalSZxDDEQJkdNf7ys9Ws72OLXtcxw1DgQfiq12QsW4s1trnW9SQ0PTg9FlJdO4bgr2tzhSb2W+285Nb8z0VpyjFbkVr5Sekc1oJXcu2hku9ZtiaYIDqzycpLWjDJGcA56rRXdsVgcyazd0RLnFpDhplGk9ZgLxrMqnLjFnqtx5whto41zXNUrvDWNnnyA5k8AvS7muqjY2AS01Hw0uMZk/Zb0TKlezWKnu6TA94GTQQXOPN7uA/QCzdK86jrRTqVxHaaSBOEDFy4AKbcqFT0u3/BnThztTk+l/JvMQRlNLWclBaK9Gn7RzOgEknyHgvXKaity6R4lByekWg4JYgqIvCjMFtRvUsMeoJhW2imQCDIOhB1VYXQn7r2WnVOHvLQ8lCUsLP0Ut23r6rQz0JBO3bevqlu29fVNg4htL/uf1BN+lVeTPed8k0H9ZpT0QBNrqd1n+of8Aah9Mqdxv+of9qE9Pim4j1QEgtj+4P9T5hL6bU/yz77VDvOiIqHkfQICb6a//AC3e9T+aH053+W/1Z81EXnl8E0uQElW2B7Sx9JzmnJzXBhBHhK8/2t2cbTBrUGvFP7TXD2JyEGcx+HVbl1X9QVz7wtlPd1BUGJjmkOHaGRGkwgPH6jQo8IWrqbM0audO1bvo+ni/qlv4FVq2w9o1p1rPUHjVYfiyB6ptE6M4WK1dF11LVXp0KQBfUOp0aBm5x6AK3U2Stw/wWn+G0Wd34PlanYW7n2QValZjmVnkMpgxk3UnLqR6BYZNyqrcjWip2T4o0l0bD2aygdkPraio8S6Y4cGjNWbQ0s7BExnlqc/+PgqdS8KpcTvHTxIiDplBER5K5Y7QXZ4pP2g5ozHlp5L5+zI5Pb7OtGhpaTRnb62XpWkglhFR0CQe0CdZOhWt2builZaDqTaIjKSGiXDni1Ko2qpgq0zGHtA5TAmQDlmc4XVfeDmNcIc0cADofumNFV5D4pNvRqqutpdj69NhnACWiIPETpM+apWy4rJa6Zp1mYi09kgAOa6NA7URIPLxRp3tjim7syO0RMjgAZEfkulQDWCS9pBGQDcUCNXHlKVSalyTJsg1HjI8V2m2aqWCvunEPY6TSePtjkeRC31wXc+lQZRDRESZDQS45nOOfiuhftnstdponE/tB+ruyQdWn2jllllmqz3OB7NRzNeOQ6QtcvL9rFQf1KY+MoScl9CfckmMMEHMyMoUlsvHC0UgWgjV0jIRMDr+vDi3jfW7pkZB+hw6dI656LItvSoXZh2eYxa68/JZUY05Js9rXls39ioEjEGh7ejm/GCrlSk0iHtgk5f2Kyd33pocWCrGZH2h+uC79gvKo6ZLZbmTEYunKV5bqZxey+m+zp0bzqscGECq0DKYa4iOJ6fHxViwSQ4ucSXZuMjten4eC5VttYcGxIwmTlHjBUFS11OJLGnIFsGfF0ZH5ZLeN9lkEpvyMHipPcElvzNHjaRk6JM/26JtOsaZy9knNoOsnUciuDRtrxkRij70z5wum1lfCPqXODgDkabvD2TOizhK+M+UF5fArZRFLjM6jLxoExvYdMQ5rm59Cciru6PNZU1AZBaJntAiI8ZTbNXqUS1zHPFMe2wEQR0mYK7FHinLqyJz7fDetwZq92efwSwO5/BSCieFR8cM2fJH6O7/ADH/ANH+1dfZyjmCyjr6ofRerlcNP7zh5j5Jbn77v6PkmwUTZep9AgbJ1PoVf3R77v6P9qG7PfPo35JsHP8Aox739KG4PP4f2V4tPfHuj5phxd5p/lPzTYOe+geY+Krvou5t+K6by77h8iPzVd7jyb8VXZJyLSx3MDzXHt1BzgQTP8w+a1D2A6iPP+yrvszT09FDkSkY8Xf4+o+aBsbxo53wWt+hN4wl9DZ934/NRsnRkorAgYqpz4SrFsq1x7FGoTESeAHL9c1pRZG8C0Hz+auUqYjMA+i819XtGt+h6KbOCaR51UrWs/ZI/lCg/wC81Et8AAfgvTXWJvJvwQFiHIeoUKOlob29mLum9qsFlpa53dfh0kcY08QuzSvYObhe+HNGfaHbE8Au/Ts4B9lSGyU3A4qc+LAfxXitwoSe10e6jLcVqXZlqVtZTc5wEtEe1GRIP5/guffO0dRwLKDXEQBiInKNGhbA3RZz/gM8qYH5Ifs6m3Sk2P4AkMPi9vs1tzYy8keZG22lx7dJ7+oEFW7M+2HstpWuozk6m52HzOi9IFnZoGR4Ux8lXN3QZbWrs6NfhHu4YWs6uuooQzPiZuhsxXJbipsGL2sbi4aA8pBnLTyVu8v+n9NxxU7Q2nijCwtLg3LPCZkDpmuoLuMf+RaDrmahnNPbd+UfSKvL2uHKVi43ryRDvg3vkZ2js+6kXNqNbVccgWZOPKQQCrlKnUYA3dOptGWKo5rGiNZk4ifJdX9iMOtWofF0x6lJtxUg6cbiepafxWMseyfvf9+5ssyCWkZ63XpSpENdVacvsh2s8zw8lUoXm+piaalAU3giA/Ec5+Inotq2wU+bT5t/JWG2CnMwz4LeGGkuvMmPiCj5rZk6FYGkyiYxMn6xtRpkSTxiDEDkrFGrWgAMa7DwyM/exYgfx4LTfsygRnTok9Ws+Sns130GZsZTZOuENH4K34PfmzKzPi1pI41Br6jYdQLJEGSHMjIExEzEqV11GeyS1vFuo8p04/JaKlRbzHqFKGD9FeurDritaOfZmTb6ZC10Dj6p28P6KmwhLAF7keBnduCmDZLKSASaNKSQM/q2q/um91voFS2e/wDDsv8A9FL/APNq6C0KDN03uj0CW6b3W+gT0kAzct7rfQIblndb7oUiSAj3LO633QluGdxvuhSJICPcM7jfdCW4Z3G+6FIkgOZedtoUGvLmsLmMNQtDROETnplofQqO0XrY2U31C6mWsBJAaC7IPJGGJn6t+X3Sp7wuqnXdLy/Jrmw0gAhwIMmJOpymOMZBVa2zdBxeSakVC8vAfk4v3snSdK1QDxHIIB9K9LI4uHZaWvDO1TLZJa12UjSHDPglUvayNY94LXhjS52GmXHCDEjLmCPI8ik+4aTnh7i9zw4Ol27OeFjXZFsDEKbJjllCdUuOk4NbNQNbTNMAOAydOZMSTnzjogHG8bJJGKnIgEYc5OUARJPhpxSslvs9Sm+p2Gtp4t5OGGYS4HEeGTZ8CFH+wKWIPx1Q9pc6m7EJpl5JqFuUdokkzOuUJ1G4aLWVabcbadYudVaHDtOdiJfpIdJGY7o840Bzrzsg1fTGU5tg8MojXMZa5qSz2yzVGucx9ItbAccgBOkkqB1w0i4Pc6q8hwqZvGdRoA3hAAzwtDY0jgrNlu2lTxQCcQaHBxkQ0uIy8XFToEVqt1KlUax9MtDge2WNwAhrnkEzM4WuMxHWSFDSvWi8tAo1JdSq1QDR4Unhjm/xyR2fWFParpp1ahqVC54LcBpuDDTImdC2RmATBE4RyUbbjptLcD6tMNbVaGtc0D65+N5mMQMhpBnLCOsxoEdmvizvw9gsDmVXlzmMwNFF2F8vBLTnnkSIE8kKd92d24LWEttAJpuDabhkHGIBkmGEw0GMphPfcFIiC+qWkVQ8Sz6zfGahccMgkxpAECITmXJTBDsdUkO3jpeIfUzh5EQCJ4QMhIMJoDWXnTcKBFnqYa5DWnDRGF3akOaX4sg0kwDkF09y3ut90KpY7sbTwHE95ph4YXFuW8ILjDQBOWvInmr6aBHuW91vuhLct7rfdCkSTQI9wzut90Jbhndb7oUiSaBHuGd1vuhLcM7jfdCkSU6BHuGd1vuhHct7rfdCekgGbpvdb6BLdN7rfQJ6SA//2Q==",
          desc: "Keripik singkong renyah dengan bumbu balado asli Padang yang pedas, manis, dan gurih. Tanpa pengawet.",
        },
        {
          id: 6,
          name: "Dompet Kulit Pria Garut",
          price: 210000,
          seller: "Garut Kulit Asli",
          category: "Fashion",
          stock: 12,
          img: "https://images.unsplash.com/photo-1627123424574-724758594e93?ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxzZWFyY2h8M3x8bGVhdGhlciUyMHdhbGxldHxlbnwwfHwwfHx8MA%3D%3D&auto=format&fit=crop&q=60&w=600",
          desc: "Dompet pria dibuat dari 100% kulit sapi asli Garut. Desain klasik, jahitan rapi, dan tahan lama.",
        },
        {
          id: 7,
          name: "Kripik Tempe Sagu",
          price: 15000,
          seller: "UMKM Plosoharjo",
          category: "Makanan",
          stock: 100,
          img: "https://media.istockphoto.com/id/1438232264/id/foto/keripik-tempe-aci-ini-adalah-keripik-tradisional-indonesia.jpg?s=2048x2048&w=is&k=20&c=_HnatZc643mS_uRfWvFs4gMcRkkZDeofRyBvo1AIEAQ=",
          desc: "Kripik tempe dengan tepung sagu pilihan, renyah dan gurih. Dibuat dari tempe pilihan dan digoreng dengan minyak berkualitas.",
        },
        {
          id: 8,
          name: "Kripik Gembus",
          price: 12000,
          seller: "UMKM Plosoharjo",
          category: "Makanan",
          stock: 75,
          img: "https://jadesta.kemenparekraf.go.id/imgpost/147654.jpg",
          desc: "Kripik gembus yang renyah dengan rasa yang khas. Terbuat dari ampas tahu pilihan dan diproses dengan higienis.",
        },
      ];

      // --- STATE APLIKASI ---
      let cart = []; // Format: [{ id: 1, name: "...", price: ..., qty: 1, img: "..." }, ...]
      let currentProduct = null; // Menyimpan produk yang sedang dilihat di halaman detail
      const shippingCost = 10000;

      // --- FUNGSI UTILITAS ---

      /**
       * Mengubah angka menjadi format Rupiah.
       * @param {number} number - Angka yang akan diformat.
       * @returns {string} - String berformat Rupiah.
       */
      function formatRupiah(number) {
        return new Intl.NumberFormat("id-ID", {
          style: "currency",
          currency: "IDR",
          minimumFractionDigits: 0,
        }).format(number);
      }

      /**
       * Navigasi antar halaman (div)
       * @param {string} pageId - ID dari div halaman (cth: 'home', 'cart').
       */
      function navigateTo(pageId) {
        // Sembunyikan semua halaman
        document.querySelectorAll(".page").forEach((page) => {
          page.classList.remove("active");
        });
        // Tampilkan halaman yang dituju
        const targetPage = document.getElementById(`page-${pageId}`);
        if (targetPage) {
          targetPage.classList.add("active");
          window.scrollTo(0, 0); // Scroll ke atas
        }

        // Logika khusus saat pindah halaman
        if (pageId === "cart") {
          renderCart();
        }
        if (pageId === "checkout") {
          renderCheckoutSummary();
        }
      }

      // --- FUNGSI RENDER ---

      /**
       * Membuat HTML untuk satu card produk.
       * @param {object} product - Objek produk.
       * @returns {string} - HTML string untuk card produk.
       */
      function createProductCardHTML(product) {
        return `
                <div class="bg-white rounded-lg shadow-md overflow-hidden transition-transform duration-300 hover:shadow-xl hover:-translate-y-1 cursor-pointer" onclick="viewProduct(${
                  product.id
                })">
                    <img src="${product.img}" alt="${
          product.name
        }" class="w-full h-48 md:h-56 object-cover">
                    <div class="p-4">
                        <h3 class="font-medium text-gray-800 truncate">${
                          product.name
                        }</h3>
                        <p class="text-sm text-gray-500 mb-2">oleh: ${
                          product.seller
                        }</p>
                        <p class="font-bold text-lg text-primary-700">${formatRupiah(
                          product.price
                        )}</p>
                    </div>
                </div>
            `;
      }

      /**
       * Merender semua produk ke halaman utama.
       */
      function renderHomeProducts() {
        const grid = document.getElementById("home-product-grid");
        grid.innerHTML = allProducts.map(createProductCardHTML).join("");
      }

      /**
       * Merender produk hasil pencarian atau kategori.
       * @param {array} productsToShow - Array produk yang akan ditampilkan.
       * @param {string} title - Judul halaman (cth: "Hasil pencarian untuk 'Kopi'").
       */
      function renderSearchResults(productsToShow, title) {
        const grid = document.getElementById("search-product-grid");
        const noResults = document.getElementById("search-no-results");
        document.getElementById("search-results-title").textContent = title;

        if (productsToShow.length === 0) {
          grid.innerHTML = "";
          noResults.style.display = "block";
        } else {
          grid.innerHTML = productsToShow.map(createProductCardHTML).join("");
          noResults.style.display = "none";
        }

        navigateTo("search");
      }

      /**
       * Merender isi halaman keranjang belanja.
       */
      function renderCart() {
        const container = document.getElementById("cart-items-container");
        const emptyState = document.getElementById("cart-empty-state");
        const summary = document.getElementById("cart-summary");

        if (cart.length === 0) {
          container.innerHTML = "";
          emptyState.style.display = "block";
          summary.style.display = "none";
        } else {
          emptyState.style.display = "none";
          summary.style.display = "block";

          container.innerHTML = cart
            .map(
              (item) => `
                    <div class="bg-white p-4 rounded-lg shadow-sm flex items-start space-x-4">
                        <img src="${item.img}" alt="${
                item.name
              }" class="w-20 h-20 md:w-24 md:h-24 object-cover rounded-md">
                        <div class="flex-1">
                            <h3 class="font-medium text-gray-800">${
                              item.name
                            }</h3>
                            <p class="text-sm text-gray-500">oleh: ${
                              item.seller
                            }</p>
                            <p class="font-bold text-lg text-primary-700 mt-1">${formatRupiah(
                              item.price
                            )}</p>
                        </div>
                        <div class="flex flex-col items-end justify-between h-full">
                            <!-- Input Qty -->
                            <div class="flex items-center border rounded-md">
                                <button onclick="updateCartQuantity(${
                                  item.id
                                }, ${
                item.qty - 1
              })" class="px-2 py-1 text-sm text-gray-600 hover:bg-gray-100 rounded-l-md" ${
                item.qty <= 1 ? "disabled" : ""
              }>-</button>
                                <input type="number" value="${
                                  item.qty
                                }" min="1" onchange="updateCartQuantity(${
                item.id
              }, this.value)" class="w-10 text-center text-sm border-none focus:ring-0">
                                <button onclick="updateCartQuantity(${
                                  item.id
                                }, ${
                item.qty + 1
              })" class="px-2 py-1 text-sm text-gray-600 hover:bg-gray-100 rounded-r-md">+</button>
                            </div>
                            <!-- Tombol Hapus -->
                            <button onclick="removeFromCart(${
                              item.id
                            })" class="text-sm text-red-500 hover:underline mt-2">Hapus</button>
                        </div>
                    </div>
                `
            )
            .join("");
        }
        updateCartSummary();
        updateCartCountBadge();
      }

      /**
       * Update ringkasan subtotal di halaman keranjang.
       */
      function updateCartSummary() {
        const subtotal = cart.reduce(
          (acc, item) => acc + item.price * item.qty,
          0
        );
        document.getElementById("cart-subtotal").textContent =
          formatRupiah(subtotal);
      }

      /**
       * Update ringkasan di halaman checkout.
       */
      function renderCheckoutSummary() {
        const subtotal = cart.reduce(
          (acc, item) => acc + item.price * item.qty,
          0
        );
        const total = subtotal + shippingCost;

        document.getElementById("checkout-subtotal").textContent =
          formatRupiah(subtotal);
        document.getElementById("checkout-shipping").textContent =
          formatRupiah(shippingCost);
        document.getElementById("checkout-total").textContent =
          formatRupiah(total);
      }

      // --- FUNGSI HANDLER (AKSI PENGGUNA) ---

      /**
       * Menampilkan halaman detail untuk produk yang dipilih.
       * @param {number} productId - ID produk yang akan ditampilkan.
       */
      function viewProduct(productId) {
        const product = allProducts.find((p) => p.id === productId);
        if (!product) return;

        currentProduct = product; // Simpan produk yang sedang dilihat

        // Isi data ke elemen HTML
        document.getElementById("product-detail-img").src = product.img;
        document.getElementById("product-detail-img").alt = product.name;
        document.getElementById("product-detail-seller").textContent =
          product.seller;
        document.getElementById("product-detail-name").textContent =
          product.name;
        document.getElementById("product-detail-price").textContent =
          formatRupiah(product.price);
        document.getElementById("product-detail-stock").textContent =
          product.stock;
        document.getElementById("product-detail-desc").textContent =
          product.desc;
        document.getElementById("product-qty-input").value = 1; // Reset qty
        document.getElementById("toast-success").style.display = "none"; // Sembunyikan notifikasi

        navigateTo("product");
      }

      /**
       * Menangani pencarian produk.
       * @param {Event} event - Event submit form.
       */
      function handleSearch(event) {
        event.preventDefault();
        // Cek input mobile atau desktop
        let query = document.getElementById("search-input").value;
        if (query === "") {
          query = document.getElementById("search-input-mobile").value;
        }
        query = query.toLowerCase();

        const results = allProducts.filter(
          (p) =>
            p.name.toLowerCase().includes(query) ||
            p.seller.toLowerCase().includes(query) ||
            p.category.toLowerCase().includes(query)
        );

        renderSearchResults(results, `Hasil pencarian untuk "${query}"`);
      }

      /**
       * Menampilkan halaman kategori (simulasi pencarian berdasarkan kategori).
       * @param {string} categoryName - Nama kategori.
       */
      function showCategory(categoryName) {
        const results = allProducts.filter((p) => p.category === categoryName);
        renderSearchResults(results, `Menampilkan Kategori "${categoryName}"`);
      }

      /**
       * Mengubah jumlah Qty di halaman detail produk.
       * @param {'increment'|'decrement'} action - Aksi tambah atau kurang.
       */
      function updateProductQty(action) {
        const input = document.getElementById("product-qty-input");
        let qty = parseInt(input.value);
        if (action === "increment") {
          qty++;
        } else if (action === "decrement" && qty > 1) {
          qty--;
        }
        input.value = qty;
      }

      /**
       * Menambahkan produk ke keranjang.
       */
      function handleAddToCart() {
        if (!currentProduct) return;

        const qty = parseInt(
          document.getElementById("product-qty-input").value
        );
        const existingItem = cart.find((item) => item.id === currentProduct.id);

        if (existingItem) {
          // Jika sudah ada, tambahkan qty
          existingItem.qty += qty;
        } else {
          // Jika belum ada, tambahkan item baru
          cart.push({
            id: currentProduct.id,
            name: currentProduct.name,
            price: currentProduct.price,
            seller: currentProduct.seller,
            img: currentProduct.img,
            qty: qty,
          });
        }

        updateCartCountBadge();

        // Tampilkan notifikasi sukses
        const toast = document.getElementById("toast-success");
        toast.style.display = "block";
        setTimeout(() => {
          toast.style.display = "none";
        }, 3000); // Sembunyikan setelah 3 detik
      }

      /**
       * Mengupdate jumlah item di keranjang.
       * @param {number} productId - ID produk di keranjang.
       * @param {number|string} newQty - Jumlah baru.
       */
      function updateCartQuantity(productId, newQty) {
        newQty = parseInt(newQty);
        if (newQty < 1) {
          removeFromCart(productId);
          return;
        }

        const item = cart.find((item) => item.id === productId);
        if (item) {
          item.qty = newQty;
          renderCart(); // Render ulang keranjang
        }
      }

      /**
       * Menghapus item dari keranjang.
       * @param {number} productId - ID produk yang akan dihapus.
       */
      function removeFromCart(productId) {
        cart = cart.filter((item) => item.id !== productId);
        renderCart(); // Render ulang keranjang
      }

      /**
       * Update badge jumlah item di ikon keranjang.
       */
      function updateCartCountBadge() {
        const totalItems = cart.reduce((acc, item) => acc + item.qty, 0);
        document.getElementById("cart-count-badge").textContent = totalItems;
      }

      /**
       * Menangani proses "Buat Pesanan".
       * @param {Event} event - Event submit form checkout.
       */
      function handlePlaceOrder(event) {
        event.preventDefault();

        // Validasi sederhana (misal, cek keranjang tidak kosong)
        if (cart.length === 0) {
          // Seharusnya tidak terjadi karena tombol checkout disembunyikan, tapi sbg pengaman
          return;
        }

        // Simulasi pembuatan pesanan
        const orderId = `#${Math.floor(Math.random() * 90000) + 10000}`;
        const total =
          cart.reduce((acc, item) => acc + item.price * item.qty, 0) +
          shippingCost;

        // Set info di halaman "Thank You"
        document.getElementById("order-id").textContent = orderId;
        document.getElementById("thankyou-total").textContent =
          formatRupiah(total);

        // Reset keranjang
        cart = [];
        updateCartCountBadge();

        // Pindah ke halaman "Thank You"
        navigateTo("thankyou");
      }

      // --- INISIALISASI ---
      /**
       * Fungsi yang dijalankan saat halaman selesai dimuat.
       */
      document.addEventListener("DOMContentLoaded", () => {
        renderHomeProducts(); // Tampilkan produk di homepage
        updateCartCountBadge(); // Pastikan badge keranjang 0
      });
    </script>
  </body>
</html>
